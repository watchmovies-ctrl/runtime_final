{% extends "base.html" %}
{% block title %}Machine Management{% endblock %}
{% block content %}
<div class="glass-card">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h3 style="margin:0;">Fleet Overview</h3>
        <button onclick="document.getElementById('addModal').style.display='flex'" class="btn btn-glow">
            <span>+</span> Add Machine
        </button>
    </div>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Type</th>
                <th>Capacity / Hr</th>
            </tr>
        </thead>
        <tbody>
            {% for m in machines %}
            <tr>
                <td style="color:var(--text-muted);">#{{ m.id }}</td>
                <td><strong>{{ m.name }}</strong></td>
                <td>{{ m.type }}</td>
                <td>{{ m.capacity_per_hour }} units</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Modal -->
<div id="addModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:100; justify-content:center; align-items:center;">
    <div class="glass-card" style="width:400px; background:#1e293b;">
        <h3>Add New Machine</h3>
        <form method="POST">
            <div style="margin-bottom:15px;">
                <label style="display:block; margin-bottom:5px; font-size:12px; color:#94a3b8;">Machine Name</label>
                <input type="text" name="name" required style="width:100%; padding:10px; border-radius:8px; border:1px solid #334155; background:#0f172a; color:white;">
            </div>
            <div style="margin-bottom:15px;">
                <label style="display:block; margin-bottom:5px; font-size:12px; color:#94a3b8;">Type</label>
                <select name="type" required style="width:100%; padding:10px; border-radius:8px; border:1px solid #334155; background:#0f172a; color:white;">
                    <option value="CNC">CNC</option>
                    <option value="Press">Press</option>
                    <option value="Milling">Milling</option>
                    <option value="Packing">Packing</option>
                </select>
            </div>
            <div style="margin-bottom:20px;">
                <label style="display:block; margin-bottom:5px; font-size:12px; color:#94a3b8;">Hourly Capacity</label>
                <input type="number" name="capacity" required style="width:100%; padding:10px; border-radius:8px; border:1px solid #334155; background:#0f172a; color:white;">
            </div>
            <div style="display:flex; gap:10px;">
                <button type="button" onclick="document.getElementById('addModal').style.display='none'" class="btn" style="background:#334155; color:white;">Cancel</button>
                <button type="submit" class="btn btn-glow" style="flex:1; justify-content:center;">Save Machine</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
